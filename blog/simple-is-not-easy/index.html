<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Simple Over Easy: Architectural Constraints That Make AI Generated Code Maintainable | Forge Code</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://forgecode.dev/tc-og-2.png"><meta data-rh="true" name="twitter:image" content="https://forgecode.dev/tc-og-2.png"><meta data-rh="true" property="og:url" content="https://forgecode.dev/blog/simple-is-not-easy/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Simple Over Easy: Architectural Constraints That Make AI Generated Code Maintainable | Forge Code"><meta data-rh="true" name="description" content="Two months ago, a 13-year-old video taught me why AI agents get stuck at 90% and how to architect my way to ~100%"><meta data-rh="true" property="og:description" content="Two months ago, a 13-year-old video taught me why AI agents get stuck at 90% and how to architect my way to ~100%"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2025-06-26T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/tusharmath"><meta data-rh="true" property="article:tag" content="Software Architecture,Vibe Coding,Code Review,Technical Debt,Maintainability"><link data-rh="true" rel="canonical" href="https://forgecode.dev/blog/simple-is-not-easy/"><link data-rh="true" rel="alternate" href="https://forgecode.dev/blog/simple-is-not-easy/" hreflang="en"><link data-rh="true" rel="alternate" href="https://forgecode.dev/blog/simple-is-not-easy/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://748OFOGLOE-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://forgecode.dev/blog/simple-is-not-easy","mainEntityOfPage":"https://forgecode.dev/blog/simple-is-not-easy","url":"https://forgecode.dev/blog/simple-is-not-easy","headline":"Simple Over Easy: Architectural Constraints That Make AI Generated Code Maintainable","name":"Simple Over Easy: Architectural Constraints That Make AI Generated Code Maintainable","description":"Two months ago, a 13-year-old video taught me why AI agents get stuck at 90% and how to architect my way to ~100%","datePublished":"2025-06-26T00:00:00.000Z","author":{"@type":"Person","name":"Tushar","url":"https://github.com/tusharmath","image":"https://avatars.githubusercontent.com/u/194482?v=4"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://forgecode.dev/blog","name":"Feed of ForgeCode blogs"}}</script><link rel="search" type="application/opensearchdescription+xml" title="Forge Code" href="/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Forge Code RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Forge Code Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Forge Code JSON Feed">



<link rel="icon" href="/images/favicon-light.svg" type="image/svg+xml">
<link rel="icon" href="/images/favicon-dark.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)">
<script defer="defer" data-domain="forgecode.dev" src="https://plausible.io/js/script.file-downloads.hash.outbound-links.pageview-props.revenue.tagged-events.js"></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script>
<script type="application/ld+json">{"@context":"https://schema.org/","@type":"WebSite","name":"ForgeCode","url":"https://forgecode.dev/"}</script>
<script>!function(e,n,t,i,c,s){e.SnitchObject=t,e[t]||(e[t]=function(){(e[t].q=e[t].q||[]).push(arguments)}),e[t].l=+new Date,c=n.createElement(i),s=n.getElementsByTagName(i)[0],c.src="//snid.snitcher.com/8432087.js",s.parentNode.insertBefore(c,s)}(window,document,"snid","script"),snid("verify","8432087")</script>
<script>!function(){var t=window.reb2b=window.reb2b||[];if(!t.invoked){t.invoked=!0,t.methods=["identify","collect"],t.factory=function(e){return function(){var r=Array.prototype.slice.call(arguments);return r.unshift(e),t.push(r),t}};for(var e=0;e<t.methods.length;e++){var r=t.methods[e];t[r]=t.factory(r)}t.load=function(t){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://s3-us-west-2.amazonaws.com/b2bjsstore/b/"+t+"/0OV0VHL3P56Z.js.gz";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r)},t.SNIPPET_VERSION="1.0.1",t.load("0OV0VHL3P56Z")}}()</script><link rel="stylesheet" href="/assets/css/styles.8e9d534f.css">
<script src="/assets/js/runtime~main.0cc229f2.js" defer="defer"></script>
<script src="/assets/js/main.39f2439b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="sticky top-0 z-50"><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" aria-label="Forge Code" href="/"><div class="navbar__logo" style="height:30px"><img src="/images/home/logo-dark.svg" alt="logo"></div></a><a class="navbar__item navbar__link" href="/">Home</a><a class="navbar__item navbar__link" href="/pricing/">Pricing</a><a class="navbar__item navbar__link" href="/docs/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/">Blogs</a><a class="navbar__item navbar__link" href="/releases/">Releases</a></div><div class="navbar__items navbar__items--right"><div class="hidden lg:flex search-icon-navbar navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a href="https://app.forgecode.dev/app" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Login</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav></div><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_eExm"><div class="container mx-auto mt-3 mb-10 md:my-8 px-4"><div class="flex flex-row"><div class="hidden lg:block lg:w-[20.83%]"></div><div class="w-full lg:w-[58.33%]"><article><header><a class="flex items-center gap-2 my-8 cursor-pointer !no-underline" href="/blog/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg><span class="text-content-small text-tailCall-light-600">Back to Blogs</span></a><h1 class="title_xvU1">Simple Over Easy: Architectural Constraints That Make AI Generated Code Maintainable</h1><div class="container_iJTo margin-vert--md"><time datetime="2025-06-26T00:00:00.000Z">June 26, 2025</time> Â· <!-- -->11 min read<div class="w-full flex flex-wrap gap-2 mt-4"><a class="bg-tailCall-dark-700 !no-underline text-tailCall-light-200 px-3 py-2 rounded-full cursor-pointer" href="/blog/tags/software-architecture/">Software Architecture</a><a class="bg-tailCall-dark-700 !no-underline text-tailCall-light-200 px-3 py-2 rounded-full cursor-pointer" href="/blog/tags/vibe-coding/">Vibe Coding</a><a class="bg-tailCall-dark-700 !no-underline text-tailCall-light-200 px-3 py-2 rounded-full cursor-pointer" href="/blog/tags/code-review/">Code Review</a><a class="bg-tailCall-dark-700 !no-underline text-tailCall-light-200 px-3 py-2 rounded-full cursor-pointer" href="/blog/tags/technical-debt/">Technical Debt</a><a class="bg-tailCall-dark-700 !no-underline text-tailCall-light-200 px-3 py-2 rounded-full cursor-pointer" href="/blog/tags/maintainability/">Maintainability</a></div></div></header><div id="__blog-post-container" class="markdown"><blockquote>
<p><strong>TL;DR</strong>: AI agents can generate code that passes tests and looks familiar, but the last 10% of understanding, review, and maintenance becomes impossible. By applying Rich Hickey&#x27;s principles from his talk &quot;Simple Made Easy&quot;, Our team constrained our architecture to leave only one way to solve each problem, making AI-generated code easy to review and maintain.</p>
</blockquote>
<p>Two months ago, YouTube&#x27;s recommendation algorithm served me Rich Hickey&#x27;s 2011 QCon talk <a href="https://www.youtube.com/watch?v=SxdOUGdseq4" target="_blank" rel="noopener noreferrer">&quot;Simple Made Easy&quot;</a>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If you haven&#x27;t seen it, I highly recommend watching it. It&#x27;s a 13-year-old talk that feels more relevant today than ever.
<a href="https://www.youtube.com/watch?v=SxdOUGdseq4" target="_blank" rel="noopener noreferrer">&quot;Simple Made Easy&quot;</a></p></div></div>
<p>We&#x27;ve all experienced this with AI coding agents, what I now call <strong>the AI 90/10 problem</strong>: Agents can generate syntactically correct, test passing code that gets us 90% of the way there incredibly fast, but that last 10%, the part where humans have to understand, review, and maintain the code, becomes impossible.</p>
<p>As Hickey mentioned: &quot;We can only hope to make reliable those things we understand.&quot; And there&#x27;s usually a tradeoff: when evolving a system to make it more extensible and dynamic, it may become harder to understand and decide if it&#x27;s correct.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="the-ai-9010-problem-why-speed-becomes-paralysis">The AI 90/10 Problem: Why Speed Becomes Paralysis<a href="#the-ai-9010-problem-why-speed-becomes-paralysis" class="hash-link" aria-label="Direct link to The AI 90/10 Problem: Why Speed Becomes Paralysis" title="Direct link to The AI 90/10 Problem: Why Speed Becomes Paralysis">â</a></h2>
<p><strong>AI agents are optimization machines that tend to choose the path of least resistance during generation, not the path of least resistance during review.</strong></p>
<p>When AI Agents generate code, it&#x27;s optimizing for:</p>
<ul>
<li>â Syntactic correctness</li>
<li>â Test passage</li>
<li>â Familiar patterns</li>
<li>â Minimal prompting required</li>
</ul>
<p>But you have to live with code that&#x27;s optimized for:</p>
<ul>
<li>â Human comprehension</li>
<li>â Change velocity</li>
<li>â Debugability</li>
<li>â Long term maintenance</li>
</ul>
<p>This creates a real problem: the faster the AI agents generate code, the slower the team becomes at reviewing it.</p>
<p><strong>The root cause</strong>: We don&#x27;t constrain our AI with architecture. We give it infinite ways to solve every problem, then wonder why it chose the most complex path.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="simple-vs-easy-the-foundation-of-ai-friendly-architecture">Simple vs Easy: The Foundation of AI Friendly Architecture<a href="#simple-vs-easy-the-foundation-of-ai-friendly-architecture" class="hash-link" aria-label="Direct link to Simple vs Easy: The Foundation of AI Friendly Architecture" title="Direct link to Simple vs Easy: The Foundation of AI Friendly Architecture">â</a></h2>
<p>Hickey&#x27;s core distinction changed how I think about Agent generated code:</p>
<p><strong>Simple</strong>: &quot;One fold, one braid, one twist.&quot; Things that are not interleaved or braided together. Simple is objective, you can count the braids. As Hickey explains, the roots of &quot;simple&quot; are &quot;sim&quot; and &quot;plex&quot;, meaning &quot;one twist&quot; - the opposite of complex, which means &quot;multiple twists&quot; or &quot;braided together.&quot;</p>
<p><strong>Easy</strong>: &quot;Near at hand, nearby.&quot; Things that are familiar, already in your toolkit, close to your current skill set. Easy is relative, what&#x27;s easy for you might be hard for me. The Latin origin of &quot;easy&quot; relates to &quot;adjacent&quot;, meaning &quot;to lie near&quot; and &quot;to be nearby.&quot;</p>
<p>AI tends to choose easy over simple because it optimizes for generation speed, not maintenance clarity.</p>
<p>My Agent was generating familiar patterns (easy) that created intertwined, braided complexity (not simple). The solution isn&#x27;t to make the Agent smarter, it is to make our architecture more constraining.</p>
<p><strong>Maintainable code has one defining characteristic: it&#x27;s very easy to review.</strong></p>
<p>When there&#x27;s only one way to solve a problem, review becomes pattern matching instead of archaeology.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="the-five-principles-hickeys-blueprint">The Five Principles: Hickey&#x27;s Blueprint<a href="#the-five-principles-hickeys-blueprint" class="hash-link" aria-label="Direct link to The Five Principles: Hickey&#x27;s Blueprint" title="Direct link to The Five Principles: Hickey&#x27;s Blueprint">â</a></h2>
<p>From the talk, I have extracted five core principles that became architectural constraints for my software:</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="principle-1-avoid-complecting">Principle 1: Avoid Complecting<a href="#principle-1-avoid-complecting" class="hash-link" aria-label="Direct link to Principle 1: Avoid Complecting" title="Direct link to Principle 1: Avoid Complecting">â</a></h3>
<blockquote>
<p><strong>&quot;Complect means to interleave, to entwine, to braid. Complex means braided together, folded together. Simple means one fold, one braid, one twist.&quot;</strong></p>
</blockquote>
<p>Complecting is when you take simple components and interweave them into complex knots. Every time you complect two concepts, you lose the ability to reason about them independently. As Hickey notes: &quot;Complect results in bad software.&quot;</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="principle-2-separate-state-from-value">Principle 2: Separate State from Value<a href="#principle-2-separate-state-from-value" class="hash-link" aria-label="Direct link to Principle 2: Separate State from Value" title="Direct link to Principle 2: Separate State from Value">â</a></h3>
<blockquote>
<p><strong>&quot;State complects value and time.&quot;</strong></p>
</blockquote>
<p>When you mix what something is (value) with when it changed (time), you create artifacts that are impossible to reason about in isolation.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="principle-3-data-as-data-not-objects">Principle 3: Data as Data, Not Objects<a href="#principle-3-data-as-data-not-objects" class="hash-link" aria-label="Direct link to Principle 3: Data as Data, Not Objects" title="Direct link to Principle 3: Data as Data, Not Objects">â</a></h3>
<blockquote>
<p><strong>&quot;Information is simple. The only thing you can possibly do with information is ruin it.&quot;</strong></p>
</blockquote>
<p>Objects complect state, identity, and value. They hide information behind methods and encapsulation, making it impossible to operate on data generically.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="principle-4-functions-over-methods">Principle 4: Functions Over Methods<a href="#principle-4-functions-over-methods" class="hash-link" aria-label="Direct link to Principle 4: Functions Over Methods" title="Direct link to Principle 4: Functions Over Methods">â</a></h3>
<blockquote>
<p><strong>&quot;Methods complect function and state, namespaces.&quot;</strong></p>
</blockquote>
<p>Methods hide their dependencies in the object they&#x27;re attached to. Pure functions make all dependencies explicit. As Hickey explains, methods intertwine function logic with object state and namespace concerns.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="principle-5-composition-over-inheritance">Principle 5: Composition Over Inheritance<a href="#principle-5-composition-over-inheritance" class="hash-link" aria-label="Direct link to Principle 5: Composition Over Inheritance" title="Direct link to Principle 5: Composition Over Inheritance">â</a></h3>
<blockquote>
<p><strong>&quot;Inheritance complects types. It says these two types are complected, that&#x27;s what it means.&quot;</strong></p>
</blockquote>
<p>When you inherit, you&#x27;re saying these types are braided together. Composition lets you combine capabilities without complecting them.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="making-architecture-more-constraining-one-way-to-win">Making Architecture More Constraining: One Way to Win<a href="#making-architecture-more-constraining-one-way-to-win" class="hash-link" aria-label="Direct link to Making Architecture More Constraining: One Way to Win" title="Direct link to Making Architecture More Constraining: One Way to Win">â</a></h2>
<p>The solution isn&#x27;t to make AI smarter, it&#x27;s to make the architecture more constraining. Instead of giving AI Agent a thousand ways to implement a feature, Our team designed systems that left exactly one obvious way.</p>
<p>This approach transforms the AI generation problem: when there&#x27;s only one valid pattern to follow, AI naturally generates maintainable code because it has no other choice.</p>
<p>Here&#x27;s how our team transformed each principle into architectural constraints:</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="constraint-1-immutable-data-zero-exceptions">Constraint 1: Immutable Data, Zero Exceptions<a href="#constraint-1-immutable-data-zero-exceptions" class="hash-link" aria-label="Direct link to Constraint 1: Immutable Data, Zero Exceptions" title="Direct link to Constraint 1: Immutable Data, Zero Exceptions">â</a></h3>
<p>Separate state from value. All domain entities are immutable. When there&#x27;s only one way to change state (return a new value), AI can&#x27;t generate hidden mutations that complicate review.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="constraint-2-data-separated-from-behavior">Constraint 2: Data Separated from Behavior<a href="#constraint-2-data-separated-from-behavior" class="hash-link" aria-label="Direct link to Constraint 2: Data Separated from Behavior" title="Direct link to Constraint 2: Data Separated from Behavior">â</a></h3>
<p>Data as data, not objects. Data structures contain only data. Behavior lives in stateless services.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="constraint-3-explicit-error-context-no-exceptions">Constraint 3: Explicit Error Context, No Exceptions<a href="#constraint-3-explicit-error-context-no-exceptions" class="hash-link" aria-label="Direct link to Constraint 3: Explicit Error Context, No Exceptions" title="Direct link to Constraint 3: Explicit Error Context, No Exceptions">â</a></h3>
<p>Avoid complecting. Every error must tell the complete story of what went wrong and where. When errors are explicit and contextual, agents can&#x27;t swallow failures or create generic error handling that hides problems.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="constraint-4-pure-functions-over-methods">Constraint 4: Pure Functions Over Methods<a href="#constraint-4-pure-functions-over-methods" class="hash-link" aria-label="Direct link to Constraint 4: Pure Functions Over Methods" title="Direct link to Constraint 4: Pure Functions Over Methods">â</a></h3>
<p>Functions over methods. Business logic must be pure functions with explicit dependencies. When all dependencies are explicit, AI can&#x27;t hide complexity in object state or method chains.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="constraint-5-composition-over-inheritance">Constraint 5: Composition Over Inheritance<a href="#constraint-5-composition-over-inheritance" class="hash-link" aria-label="Direct link to Constraint 5: Composition Over Inheritance" title="Direct link to Constraint 5: Composition Over Inheritance">â</a></h3>
<p>Composition over inheritance. Capabilities compose through focused traits, never inherit. When types compose instead of inherit, AI can&#x27;t create hierarchies that complect unrelated concerns.</p>
<p>Hickey&#x27;s advice was clear: &quot;Stick a queue in there. Queues are the way to just get rid of this problem.&quot; He emphasizes that queues help decouple components by separating the &quot;when&quot; from the &quot;where&quot; - avoiding the complexity that comes from direct connections between objects.</p>
<p>Coordination between services happens only through event queues. When services can&#x27;t call each other directly, AI can&#x27;t create temporal coupling that makes systems impossible to reason about.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-constraints-teach-ai-better-patterns">How Constraints Teach AI Better Patterns<a href="#how-constraints-teach-ai-better-patterns" class="hash-link" aria-label="Direct link to How Constraints Teach AI Better Patterns" title="Direct link to How Constraints Teach AI Better Patterns">â</a></h2>
<p>What&#x27;s interesting is that our architectural constraints don&#x27;t just make code review faster, they actively teach our Agent to generate better code. Every time agent sees our patterns, it learns and add them in memory. In <a href="https://github.com/antinomyhq/forge" target="_blank" rel="noopener noreferrer">Forge</a> we call it <a href="/docs/custom-rules/">custom rules</a>. Other agents call them memory, rules etc.</p>
<ul>
<li><strong>Separation of concerns</strong> prevents feature entanglement</li>
<li><strong>Explicit dependencies</strong> make testing trivial</li>
<li><strong>Immutable data</strong> eliminates entire classes of bugs</li>
<li><strong>Pure functions</strong> compose predictably</li>
<li><strong>Data as data</strong> enables generic operations</li>
</ul>
<p>The AI has internalized our constraints with custom rules/memory.</p>
<p>If you&#x27;re experiencing the AI 90/10 problem, here&#x27;s what we learned:</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-constrain-generation-dont-guide-review">1. <strong>Constrain Generation, Don&#x27;t Guide Review</strong><a href="#1-constrain-generation-dont-guide-review" class="hash-link" aria-label="Direct link to 1-constrain-generation-dont-guide-review" title="Direct link to 1-constrain-generation-dont-guide-review">â</a></h3>
<p>Don&#x27;t try to teach your AI to generate better code. Design architecture that makes bad code impossible to express.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-one-way-to-win">2. <strong>One Way to Win</strong><a href="#2-one-way-to-win" class="hash-link" aria-label="Direct link to 2-one-way-to-win" title="Direct link to 2-one-way-to-win">â</a></h3>
<p>For every problem your AI might encounter, there should be exactly one obvious way to solve it. Multiple valid approaches create review complexity.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-good-code--reviewable-code">3. <strong>Good Code = Reviewable Code</strong><a href="#3-good-code--reviewable-code" class="hash-link" aria-label="Direct link to 3-good-code--reviewable-code" title="Direct link to 3-good-code--reviewable-code">â</a></h3>
<p>The only metric that matters for AI-generated code is: &quot;How quickly can a human verify this is correct?&quot;</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-teach-through-structure">4. <strong>Teach Through Structure</strong><a href="#4-teach-through-structure" class="hash-link" aria-label="Direct link to 4-teach-through-structure" title="Direct link to 4-teach-through-structure">â</a></h3>
<p>Your AI learns from your code structure more than your system prompt. Make sure your architecture embodies the constraints you want replicated.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="results-constraints-create-freedom">Results: Constraints Create Freedom<a href="#results-constraints-create-freedom" class="hash-link" aria-label="Direct link to Results: Constraints Create Freedom" title="Direct link to Results: Constraints Create Freedom">â</a></h2>
<p>The architectural constraints we implemented had an upfront cost, but the returns have been extraordinary:</p>
<ul>
<li><strong>Review velocity increased</strong>: What used to take hours of now takes minutes of pattern matching</li>
<li><strong>Onboarding accelerated</strong>: New team members could contribute immediately because there was only one way to solve each problem</li>
<li><strong>AI learning improved</strong>: Our agents began generating better code because our architecture taught them good patterns</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="conclusion-solving-the-9010-problem">Conclusion: Solving the 90/10 Problem<a href="#conclusion-solving-the-9010-problem" class="hash-link" aria-label="Direct link to Conclusion: Solving the 90/10 Problem" title="Direct link to Conclusion: Solving the 90/10 Problem">â</a></h2>
<p>The AI 90/10 problem isn&#x27;t a limitation of current AI Agents, it&#x27;s a failure of architectural design.</p>
<p>When your architecture constrains AI behavior through design, AI becomes your partner in building maintainable software rather than your adversary in creating technical debt.</p>
<p><strong>In the AI era, the teams that win won&#x27;t be those with the most sophisticated AI agents, they&#x27;ll be those with the most constraining architectures.</strong></p>
<p>Good code has one defining characteristic: it&#x27;s very easy to review. When you design constraints that leave only one way to solve each problem, review becomes pattern matching instead of archaeology.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>For teams ready to solve their own AI 90/10 problem, here&#x27;s how we implemented each principle in our <a href="https://github.com/antinomyhq/forge" target="_blank" rel="noopener noreferrer">Forge</a> architecture:</summary><div><div class="collapsibleContent_i85q"><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="domain-layer-pure-information-principles-1-2-3">Domain Layer: Pure Information (Principles 1, 2, 3)<a href="#domain-layer-pure-information-principles-1-2-3" class="hash-link" aria-label="Direct link to Domain Layer: Pure Information (Principles 1, 2, 3)" title="Direct link to Domain Layer: Pure Information (Principles 1, 2, 3)">â</a></h3><div class="relative overflow-hidden"><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#fff;--prism-background-color:#181818"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#fff;background-color:#181818"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#fff"><span class="token comment" style="color:#30C26D;font-style:italic">// Always represent information as data - no complecting</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token comment" style="color:#30C26D;font-style:italic">// This struct demonstrates immutability (Principle 2) and data as data (Principle 3)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token comment" style="color:#30C26D;font-style:italic">// Notice: no methods, no hidden state, just pure information</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token attribute attr-name" style="color:#8DFFF8">#[derive(Debug, Setters, Serialize, Deserialize, Clone)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token keyword" style="color:#C586C0">pub</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#C586C0">Conversation</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">pub</span><span class="token plain"> id</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">ConversationId</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">pub</span><span class="token plain"> archived</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">bool</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">pub</span><span class="token plain"> context</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Option</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token class-name" style="color:#C586C0">Context</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">pub</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">HashMap</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token class-name" style="color:#C586C0">String</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Value</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">pub</span><span class="token plain"> agents</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Vec</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token class-name" style="color:#C586C0">Agent</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">pub</span><span class="token plain"> events</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Vec</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token class-name" style="color:#C586C0">Event</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">pub</span><span class="token plain"> tasks</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">TaskList</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token punctuation" style="color:#fff">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><button aria-label="Copy code" class="absolute top-[12px] right-4 z-20 bg-[rgba(24,24,24,0.85)] border-none rounded-none px-2 py-1 flex items-center cursor-pointer text-white font-sans"><img src="/icons/basic/copy-icon.svg" alt="Copy Icon" class="w-4 h-4 [filter:brightness(2)] ml-0.5"></button></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="service-layer-focused-abstractions-principles-4-5">Service Layer: Focused Abstractions (Principles 4, 5)<a href="#service-layer-focused-abstractions-principles-4-5" class="hash-link" aria-label="Direct link to Service Layer: Focused Abstractions (Principles 4, 5)" title="Direct link to Service Layer: Focused Abstractions (Principles 4, 5)">â</a></h3><div class="relative overflow-hidden"><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#fff;--prism-background-color:#181818"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#fff;background-color:#181818"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#fff"><span class="token comment" style="color:#30C26D;font-style:italic">// Small, focused interfaces - one responsibility only (Principle 4)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token comment" style="color:#30C26D;font-style:italic">// This trait has a single, pure function with explicit dependencies</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token attribute attr-name" style="color:#8DFFF8">#[async_trait::async_trait]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token keyword" style="color:#C586C0">pub</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">trait</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#C586C0">FsReadService</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Send</span><span class="token plain"> </span><span class="token operator" style="color:#8DFFF8">+</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Sync</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">async</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#FDEA2F">read</span><span class="token punctuation" style="color:#fff">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token operator" style="color:#8DFFF8">&amp;</span><span class="token keyword" style="color:#C586C0">self</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        path</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">String</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        start_line</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Option</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token keyword" style="color:#C586C0">u64</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        end_line</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Option</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token keyword" style="color:#C586C0">u64</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token punctuation" style="color:#fff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">-&gt;</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">anyhow</span><span class="token namespace punctuation" style="opacity:0.7;color:#fff">::</span><span class="token class-name" style="color:#C586C0">Result</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token class-name" style="color:#C586C0">ReadOutput</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token punctuation" style="color:#fff">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token comment" style="color:#30C26D;font-style:italic">// Compose capabilities, don&#x27;t inherit complexity (Principle 5)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token comment" style="color:#30C26D;font-style:italic">// Notice: we compose three separate traits instead of inheriting from a base class</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token keyword" style="color:#C586C0">impl</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token class-name" style="color:#C586C0">F</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">FileInfoInfra</span><span class="token plain"> </span><span class="token operator" style="color:#8DFFF8">+</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">EnvironmentInfra</span><span class="token plain"> </span><span class="token operator" style="color:#8DFFF8">+</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">InfraFsReadService</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">FsReadService</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">for</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">ForgeFsRead</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token class-name" style="color:#C586C0">F</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">async</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#FDEA2F">read</span><span class="token punctuation" style="color:#fff">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token operator" style="color:#8DFFF8">&amp;</span><span class="token keyword" style="color:#C586C0">self</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        path</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">String</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        start_line</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Option</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token keyword" style="color:#C586C0">u64</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        end_line</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Option</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token keyword" style="color:#C586C0">u64</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token punctuation" style="color:#fff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">-&gt;</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">anyhow</span><span class="token namespace punctuation" style="opacity:0.7;color:#fff">::</span><span class="token class-name" style="color:#C586C0">Result</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token class-name" style="color:#C586C0">ReadOutput</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token keyword" style="color:#C586C0">let</span><span class="token plain"> path </span><span class="token operator" style="color:#8DFFF8">=</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Path</span><span class="token punctuation" style="color:#fff">::</span><span class="token function" style="color:#FDEA2F">new</span><span class="token punctuation" style="color:#fff">(</span><span class="token operator" style="color:#8DFFF8">&amp;</span><span class="token plain">path</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token function" style="color:#FDEA2F">assert_absolute_path</span><span class="token punctuation" style="color:#fff">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#fff">)</span><span class="token operator" style="color:#8DFFF8">?</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token keyword" style="color:#C586C0">let</span><span class="token plain"> env </span><span class="token operator" style="color:#8DFFF8">=</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">self</span><span class="token punctuation" style="color:#fff">.</span><span class="token number" style="color:#C586C0">0</span><span class="token punctuation" style="color:#fff">.</span><span class="token function" style="color:#FDEA2F">get_environment</span><span class="token punctuation" style="color:#fff">(</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token comment" style="color:#30C26D;font-style:italic">// Validate file size before reading content</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token function" style="color:#FDEA2F">assert_file_size</span><span class="token punctuation" style="color:#fff">(</span><span class="token operator" style="color:#8DFFF8">&amp;</span><span class="token operator" style="color:#8DFFF8">*</span><span class="token keyword" style="color:#C586C0">self</span><span class="token punctuation" style="color:#fff">.</span><span class="token number" style="color:#C586C0">0</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> path</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> env</span><span class="token punctuation" style="color:#fff">.</span><span class="token plain">max_file_size</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">.</span><span class="token keyword" style="color:#C586C0">await</span><span class="token operator" style="color:#8DFFF8">?</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token keyword" style="color:#C586C0">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">(</span><span class="token plain">start_line</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> end_line</span><span class="token punctuation" style="color:#fff">)</span><span class="token plain"> </span><span class="token operator" style="color:#8DFFF8">=</span><span class="token plain"> </span><span class="token function" style="color:#FDEA2F">resolve_range</span><span class="token punctuation" style="color:#fff">(</span><span class="token plain">start_line</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> end_line</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> env</span><span class="token punctuation" style="color:#fff">.</span><span class="token plain">max_read_size</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token keyword" style="color:#C586C0">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">(</span><span class="token plain">content</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> file_info</span><span class="token punctuation" style="color:#fff">)</span><span class="token plain"> </span><span class="token operator" style="color:#8DFFF8">=</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">self</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">            </span><span class="token punctuation" style="color:#fff">.</span><span class="token number" style="color:#C586C0">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">            </span><span class="token punctuation" style="color:#fff">.</span><span class="token function" style="color:#FDEA2F">range_read_utf8</span><span class="token punctuation" style="color:#fff">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> start_line</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> end_line</span><span class="token punctuation" style="color:#fff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">            </span><span class="token punctuation" style="color:#fff">.</span><span class="token keyword" style="color:#C586C0">await</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">            </span><span class="token punctuation" style="color:#fff">.</span><span class="token function" style="color:#FDEA2F">with_context</span><span class="token punctuation" style="color:#fff">(</span><span class="token closure-params closure-punctuation punctuation" style="color:#fff">|</span><span class="token closure-params closure-punctuation punctuation" style="color:#fff">|</span><span class="token plain"> </span><span class="token macro property" style="color:#C586C0">format!</span><span class="token punctuation" style="color:#fff">(</span><span class="token string" style="color:#FDB869">&quot;Failed to read file content from {}&quot;</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> path</span><span class="token punctuation" style="color:#fff">.</span><span class="token function" style="color:#FDEA2F">display</span><span class="token punctuation" style="color:#fff">(</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">)</span><span class="token operator" style="color:#8DFFF8">?</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token class-name" style="color:#C586C0">Ok</span><span class="token punctuation" style="color:#fff">(</span><span class="token class-name" style="color:#C586C0">ReadOutput</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">            content</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Content</span><span class="token punctuation" style="color:#fff">::</span><span class="token class-name" style="color:#C586C0">File</span><span class="token punctuation" style="color:#fff">(</span><span class="token plain">content</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">            start_line</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> file_info</span><span class="token punctuation" style="color:#fff">.</span><span class="token plain">start_line</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">            end_line</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> file_info</span><span class="token punctuation" style="color:#fff">.</span><span class="token plain">end_line</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">            total_lines</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> file_info</span><span class="token punctuation" style="color:#fff">.</span><span class="token plain">total_lines</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token punctuation" style="color:#fff">}</span><span class="token punctuation" style="color:#fff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token punctuation" style="color:#fff">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token punctuation" style="color:#fff">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><button aria-label="Copy code" class="absolute top-[12px] right-4 z-20 bg-[rgba(24,24,24,0.85)] border-none rounded-none px-2 py-1 flex items-center cursor-pointer text-white font-sans"><img src="/icons/basic/copy-icon.svg" alt="Copy Icon" class="w-4 h-4 [filter:brightness(2)] ml-0.5"></button></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="infrastructure-layer-simple-capabilities-principle-5">Infrastructure Layer: Simple Capabilities (Principle 5)<a href="#infrastructure-layer-simple-capabilities-principle-5" class="hash-link" aria-label="Direct link to Infrastructure Layer: Simple Capabilities (Principle 5)" title="Direct link to Infrastructure Layer: Simple Capabilities (Principle 5)">â</a></h3><div class="relative overflow-hidden"><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#fff;--prism-background-color:#181818"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#fff;background-color:#181818"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#fff"><span class="token comment" style="color:#30C26D;font-style:italic">// Infrastructure traits define what, not how (avoiding complecting)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token comment" style="color:#30C26D;font-style:italic">// Each trait has a single, focused responsibility</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token keyword" style="color:#C586C0">pub</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">trait</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#C586C0">FileInfoInfra</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Send</span><span class="token plain"> </span><span class="token operator" style="color:#8DFFF8">+</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Sync</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">async</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#FDEA2F">is_file</span><span class="token punctuation" style="color:#fff">(</span><span class="token operator" style="color:#8DFFF8">&amp;</span><span class="token keyword" style="color:#C586C0">self</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> path</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token operator" style="color:#8DFFF8">&amp;</span><span class="token class-name" style="color:#C586C0">Path</span><span class="token punctuation" style="color:#fff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">-&gt;</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">anyhow</span><span class="token namespace punctuation" style="opacity:0.7;color:#fff">::</span><span class="token class-name" style="color:#C586C0">Result</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token keyword" style="color:#C586C0">bool</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">async</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#FDEA2F">exists</span><span class="token punctuation" style="color:#fff">(</span><span class="token operator" style="color:#8DFFF8">&amp;</span><span class="token keyword" style="color:#C586C0">self</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> path</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token operator" style="color:#8DFFF8">&amp;</span><span class="token class-name" style="color:#C586C0">Path</span><span class="token punctuation" style="color:#fff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">-&gt;</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">anyhow</span><span class="token namespace punctuation" style="opacity:0.7;color:#fff">::</span><span class="token class-name" style="color:#C586C0">Result</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token keyword" style="color:#C586C0">bool</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">async</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#FDEA2F">file_size</span><span class="token punctuation" style="color:#fff">(</span><span class="token operator" style="color:#8DFFF8">&amp;</span><span class="token keyword" style="color:#C586C0">self</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> path</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token operator" style="color:#8DFFF8">&amp;</span><span class="token class-name" style="color:#C586C0">Path</span><span class="token punctuation" style="color:#fff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">-&gt;</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">anyhow</span><span class="token namespace punctuation" style="opacity:0.7;color:#fff">::</span><span class="token class-name" style="color:#C586C0">Result</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token keyword" style="color:#C586C0">u64</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token punctuation" style="color:#fff">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token keyword" style="color:#C586C0">pub</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">trait</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#C586C0">EnvironmentInfra</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Send</span><span class="token plain"> </span><span class="token operator" style="color:#8DFFF8">+</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Sync</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#FDEA2F">get_environment</span><span class="token punctuation" style="color:#fff">(</span><span class="token operator" style="color:#8DFFF8">&amp;</span><span class="token keyword" style="color:#C586C0">self</span><span class="token punctuation" style="color:#fff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">-&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Environment</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token punctuation" style="color:#fff">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token keyword" style="color:#C586C0">pub</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">trait</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#C586C0">FileReaderInfra</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Send</span><span class="token plain"> </span><span class="token operator" style="color:#8DFFF8">+</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Sync</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">async</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#FDEA2F">range_read_utf8</span><span class="token punctuation" style="color:#fff">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token operator" style="color:#8DFFF8">&amp;</span><span class="token keyword" style="color:#C586C0">self</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        path</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token operator" style="color:#8DFFF8">&amp;</span><span class="token class-name" style="color:#C586C0">Path</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        start_line</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">u64</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        end_line</span><span class="token punctuation" style="color:#fff">:</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">u64</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token punctuation" style="color:#fff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">-&gt;</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">anyhow</span><span class="token namespace punctuation" style="opacity:0.7;color:#fff">::</span><span class="token class-name" style="color:#C586C0">Result</span><span class="token operator" style="color:#8DFFF8">&lt;</span><span class="token punctuation" style="color:#fff">(</span><span class="token class-name" style="color:#C586C0">String</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">forge_fs</span><span class="token namespace punctuation" style="opacity:0.7;color:#fff">::</span><span class="token class-name" style="color:#C586C0">FileInfo</span><span class="token punctuation" style="color:#fff">)</span><span class="token operator" style="color:#8DFFF8">&gt;</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token punctuation" style="color:#fff">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><button aria-label="Copy code" class="absolute top-[12px] right-4 z-20 bg-[rgba(24,24,24,0.85)] border-none rounded-none px-2 py-1 flex items-center cursor-pointer text-white font-sans"><img src="/icons/basic/copy-icon.svg" alt="Copy Icon" class="w-4 h-4 [filter:brightness(2)] ml-0.5"></button></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="error-handling-explicit-context-principle-1">Error Handling: Explicit Context (Principle 1)<a href="#error-handling-explicit-context-principle-1" class="hash-link" aria-label="Direct link to Error Handling: Explicit Context (Principle 1)" title="Direct link to Error Handling: Explicit Context (Principle 1)">â</a></h3><div class="relative overflow-hidden"><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#fff;--prism-background-color:#181818"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#fff;background-color:#181818"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#fff"><span class="token comment" style="color:#30C26D;font-style:italic">// Every error tells a complete story - no generic errors allowed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token comment" style="color:#30C26D;font-style:italic">// This demonstrates avoiding complecting by making each error case explicit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token attribute attr-name" style="color:#8DFFF8">#[derive(Debug, Error)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token keyword" style="color:#C586C0">pub</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">enum</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#C586C0">Error</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token attribute attr-name" style="color:#8DFFF8">#[error(</span><span class="token attribute attr-name string" style="color:#FDB869">&quot;Missing tool name&quot;</span><span class="token attribute attr-name" style="color:#8DFFF8">)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token class-name" style="color:#C586C0">ToolCallMissingName</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token attribute attr-name" style="color:#8DFFF8">#[error(</span><span class="token attribute attr-name string" style="color:#FDB869">&quot;Invalid tool call arguments: {0}&quot;</span><span class="token attribute attr-name" style="color:#8DFFF8">)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token class-name" style="color:#C586C0">ToolCallArgument</span><span class="token punctuation" style="color:#fff">(</span><span class="token namespace" style="opacity:0.7">serde_json</span><span class="token namespace punctuation" style="opacity:0.7;color:#fff">::</span><span class="token class-name" style="color:#C586C0">Error</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token attribute attr-name" style="color:#8DFFF8">#[error(</span><span class="token attribute attr-name string" style="color:#FDB869">&quot;Agent not found in the arena: {0}&quot;</span><span class="token attribute attr-name" style="color:#8DFFF8">)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token class-name" style="color:#C586C0">AgentUndefined</span><span class="token punctuation" style="color:#fff">(</span><span class="token class-name" style="color:#C586C0">AgentId</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token attribute attr-name" style="color:#8DFFF8">#[error(</span><span class="token attribute attr-name string" style="color:#FDB869">&quot;Agent &#x27;{0}&#x27; has reached max turns of {1}&quot;</span><span class="token attribute attr-name" style="color:#8DFFF8">)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token class-name" style="color:#C586C0">MaxTurnsReached</span><span class="token punctuation" style="color:#fff">(</span><span class="token class-name" style="color:#C586C0">AgentId</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">u64</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token attribute attr-name" style="color:#8DFFF8">#[error(</span><span class="token attribute attr-name string" style="color:#FDB869">&quot;Conversation not found: {0}&quot;</span><span class="token attribute attr-name" style="color:#8DFFF8">)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token class-name" style="color:#C586C0">ConversationNotFound</span><span class="token punctuation" style="color:#fff">(</span><span class="token class-name" style="color:#C586C0">ConversationId</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token attribute attr-name" style="color:#8DFFF8">#[error(</span><span class="token attribute attr-name string" style="color:#FDB869">&quot;No model defined for agent: {0}&quot;</span><span class="token attribute attr-name" style="color:#8DFFF8">)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token class-name" style="color:#C586C0">NoModelDefined</span><span class="token punctuation" style="color:#fff">(</span><span class="token class-name" style="color:#C586C0">AgentId</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token punctuation" style="color:#fff">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><button aria-label="Copy code" class="absolute top-[12px] right-4 z-20 bg-[rgba(24,24,24,0.85)] border-none rounded-none px-2 py-1 flex items-center cursor-pointer text-white font-sans"><img src="/icons/basic/copy-icon.svg" alt="Copy Icon" class="w-4 h-4 [filter:brightness(2)] ml-0.5"></button></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="testing-properties-over-implementation-all-principles">Testing: Properties Over Implementation (All Principles)<a href="#testing-properties-over-implementation-all-principles" class="hash-link" aria-label="Direct link to Testing: Properties Over Implementation (All Principles)" title="Direct link to Testing: Properties Over Implementation (All Principles)">â</a></h3><div class="relative overflow-hidden"><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#fff;--prism-background-color:#181818"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#fff;background-color:#181818"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#fff"><span class="token attribute attr-name" style="color:#8DFFF8">#[cfg(test)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token keyword" style="color:#C586C0">mod</span><span class="token plain"> </span><span class="token module-declaration namespace" style="opacity:0.7">tests</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">use</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">pretty_assertions</span><span class="token namespace punctuation" style="opacity:0.7;color:#fff">::</span><span class="token plain">assert_eq</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token comment" style="color:#30C26D;font-style:italic">// Testing pattern: fixture -&gt; actual -&gt; expected -&gt; assert</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token attribute attr-name" style="color:#8DFFF8">#[test]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token keyword" style="color:#C586C0">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#FDEA2F">test_conversation_new_with_workflow_variables</span><span class="token punctuation" style="color:#fff">(</span><span class="token punctuation" style="color:#fff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#fff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token comment" style="color:#30C26D;font-style:italic">// Arrange</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token keyword" style="color:#C586C0">let</span><span class="token plain"> id </span><span class="token operator" style="color:#8DFFF8">=</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">ConversationId</span><span class="token punctuation" style="color:#fff">::</span><span class="token function" style="color:#FDEA2F">generate</span><span class="token punctuation" style="color:#fff">(</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token keyword" style="color:#C586C0">let</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">mut</span><span class="token plain"> variables </span><span class="token operator" style="color:#8DFFF8">=</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">HashMap</span><span class="token punctuation" style="color:#fff">::</span><span class="token function" style="color:#FDEA2F">new</span><span class="token punctuation" style="color:#fff">(</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        variables</span><span class="token punctuation" style="color:#fff">.</span><span class="token function" style="color:#FDEA2F">insert</span><span class="token punctuation" style="color:#fff">(</span><span class="token string" style="color:#FDB869">&quot;key1&quot;</span><span class="token punctuation" style="color:#fff">.</span><span class="token function" style="color:#FDEA2F">to_string</span><span class="token punctuation" style="color:#fff">(</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> </span><span class="token macro property" style="color:#C586C0">json!</span><span class="token punctuation" style="color:#fff">(</span><span class="token string" style="color:#FDB869">&quot;value1&quot;</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        variables</span><span class="token punctuation" style="color:#fff">.</span><span class="token function" style="color:#FDEA2F">insert</span><span class="token punctuation" style="color:#fff">(</span><span class="token string" style="color:#FDB869">&quot;key2&quot;</span><span class="token punctuation" style="color:#fff">.</span><span class="token function" style="color:#FDEA2F">to_string</span><span class="token punctuation" style="color:#fff">(</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> </span><span class="token macro property" style="color:#C586C0">json!</span><span class="token punctuation" style="color:#fff">(</span><span class="token number" style="color:#C586C0">42</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token keyword" style="color:#C586C0">let</span><span class="token plain"> </span><span class="token keyword" style="color:#C586C0">mut</span><span class="token plain"> workflow </span><span class="token operator" style="color:#8DFFF8">=</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Workflow</span><span class="token punctuation" style="color:#fff">::</span><span class="token function" style="color:#FDEA2F">new</span><span class="token punctuation" style="color:#fff">(</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        workflow</span><span class="token punctuation" style="color:#fff">.</span><span class="token plain">variables </span><span class="token operator" style="color:#8DFFF8">=</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#fff">.</span><span class="token function" style="color:#FDEA2F">clone</span><span class="token punctuation" style="color:#fff">(</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token comment" style="color:#30C26D;font-style:italic">// Act</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token keyword" style="color:#C586C0">let</span><span class="token plain"> conversation </span><span class="token operator" style="color:#8DFFF8">=</span><span class="token plain"> </span><span class="token class-name" style="color:#C586C0">Conversation</span><span class="token punctuation" style="color:#fff">::</span><span class="token function" style="color:#FDEA2F">new_inner</span><span class="token punctuation" style="color:#fff">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#fff">.</span><span class="token function" style="color:#FDEA2F">clone</span><span class="token punctuation" style="color:#fff">(</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> </span><span class="token macro property" style="color:#C586C0">vec!</span><span class="token punctuation" style="color:#fff">[</span><span class="token punctuation" style="color:#fff">]</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token comment" style="color:#30C26D;font-style:italic">// Assert</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token macro property" style="color:#C586C0">assert_eq!</span><span class="token punctuation" style="color:#fff">(</span><span class="token plain">conversation</span><span class="token punctuation" style="color:#fff">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">        </span><span class="token macro property" style="color:#C586C0">assert_eq!</span><span class="token punctuation" style="color:#fff">(</span><span class="token plain">conversation</span><span class="token punctuation" style="color:#fff">.</span><span class="token plain">variables</span><span class="token punctuation" style="color:#fff">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#fff">)</span><span class="token punctuation" style="color:#fff">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain">    </span><span class="token punctuation" style="color:#fff">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#fff"><span class="token plain"></span><span class="token punctuation" style="color:#fff">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><button aria-label="Copy code" class="absolute top-[12px] right-4 z-20 bg-[rgba(24,24,24,0.85)] border-none rounded-none px-2 py-1 flex items-center cursor-pointer text-white font-sans"><img src="/icons/basic/copy-icon.svg" alt="Copy Icon" class="w-4 h-4 [filter:brightness(2)] ml-0.5"></button></div><p>When <a href="https://github.com/antinomyhq/forge" target="_blank" rel="noopener noreferrer">Forge</a> generates new code, it naturally follows these structures because there&#x27;s no other way to express solutions in our architecture. AI generated code that&#x27;s easier to review than human written code, because our constraints make complexity impossible to express.</p></div></div></details></div><footer class="docusaurus-mt-lg"><h1 class="text-[12px]">Posted By</h1><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_q4o9"><div class="flex items-center gap-3"><div class="flex-shrink-0"><img src="https://avatars.githubusercontent.com/u/194482?v=4" alt="Tushar" class="w-10 h-10 rounded-full object-cover border-2 border-gray-100 shadow-sm"></div><div class="flex-1 min-w-0"><div class="mb-1"><a href="https://github.com/tusharmath" target="_blank" rel="noopener noreferrer" class="font-semibold text-gray-900 hover:text-blue-600 transition-colors no-underline">Tushar</a></div><div class="flex items-center gap-1.5"><a href="https://github.com/tusharmath" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-gray-700 transition-colors p-0.5 hover:bg-gray-100 rounded" aria-label="Tushar on github"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path></svg></a><a href="https://twitter.com/tusharmath" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-gray-700 transition-colors p-0.5 hover:bg-gray-100 rounded" aria-label="Tushar on twitter"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a><a href="https://linkedin.com/in/tusharmath" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-gray-700 transition-colors p-0.5 hover:bg-gray-100 rounded" aria-label="Tushar on linkedin"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a></div></div></div></div></div></footer></article><div class="fixed left-2 sm:left-4 lg:left-8 xl:left-16 z-40 transition-all duration-300 ease-in-out flex opacity-0 translate-y-4" style="top:300px;transform:translateY(16px)" role="complementary" aria-label="Social sharing buttons"><div class="flex flex-col gap-2 sm:gap-3"><div class="text-xs font-medium text-gray-600 mb-1 transform -rotate-90 origin-center whitespace-nowrap hidden sm:block">Share</div><button class="group relative w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-full shadow-md hover:shadow-lg transition-all duration-200 ease-in-out border-4 border-gray-200 hover:border-yellow-400 flex items-center justify-center hover:scale-105 hover:bg-yellow-50" aria-label="Share &quot;Simple Over Easy: Architectural Constraints That Make AI Generated Code Maintainable&quot; on X (Twitter)" title="Share on X"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" viewBox="0 0 28 28" class="w-4 h-4 sm:w-5 sm:h-5 group-hover:opacity-80 transition-opacity duration-200"><path fill="#1a1a1a" d="M18.745 6.428h2.53l-5.528 6.318 6.503 8.597h-5.092l-3.988-5.215-4.563 5.215H6.076l5.912-6.758L5.75 6.428h5.22l3.605 4.766zm-.888 13.4h1.402l-9.05-11.965H8.705z"></path></svg><div class="absolute left-full ml-3 px-2 py-1 bg-gray-900 text-tailCall-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap hidden sm:block">Share on X</div></button><button class="group relative w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-full shadow-md hover:shadow-lg transition-all duration-200 ease-in-out border-4 border-gray-200 hover:border-yellow-400 flex items-center justify-center hover:scale-105 hover:bg-yellow-50" aria-label="Share &quot;Simple Over Easy: Architectural Constraints That Make AI Generated Code Maintainable&quot; on LinkedIn" title="Share on LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="w-4 h-4 sm:w-5 sm:h-5 group-hover:opacity-80 transition-opacity duration-200"><mask id="a" width="18" height="18" x="3" y="3" maskUnits="userSpaceOnUse" style="mask-type:luminance"><path fill="#fff" d="M21 3H3v18h18z"></path></mask><g mask="url(#a)"><path fill="#1a1a1a" d="M8.178 19V9.554H5.177V19zm-1.5-10.736c1.046 0 1.698-.725 1.698-1.632C8.356 5.705 7.724 5 6.698 5 5.671 5 5 5.705 5 6.632c0 .907.651 1.632 1.658 1.632zM9.84 19h3.001v-5.275c0-.282.02-.564.099-.766.217-.564.71-1.148 1.54-1.148 1.086 0 1.52.866 1.52 2.136V19H19v-5.416c0-2.902-1.48-4.252-3.455-4.252-1.619 0-2.33.947-2.725 1.591h.02v-1.37h-3c.039.887 0 9.447 0 9.447"></path></g></svg><div class="absolute left-full ml-3 px-2 py-1 bg-gray-900 text-tailCall-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap hidden sm:block">Share on LinkedIn</div></button><div class="mt-2 text-[12px] text-gray-500 max-w-[120px] leading-tight hidden xl:block">Found this helpful? Share it with your network!</div></div></div><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="!no-underline flex gap-3 items-center" href="/blog/mcp-spec-updates/"><div class="w-10 h-10 p-2 bg-tailCall-yellow flex justify-center items-center rounded-full"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg></div><div class="hidden md:block"><div class="text-tailCall-dark-100 text-[12px] font-medium">Newer post</div><div class="pagination-nav__label text-black text-content-small font-medium">MCP 2025-06-18 Spec Update: Security, Structured Output &amp; Elicitation</div></div></a><a class="!no-underline flex gap-3 items-center" href="/blog/prevent-attacks-on-mcp/"><div class="hidden md:block"><div class="text-tailCall-dark-100 text-[12px] font-medium">Older post</div><div class="pagination-nav__label text-black text-content-small font-medium">MCP Security Vulnerabilities and Attack Vectors</div></div><div class="w-10 h-10 p-2 bg-tailCall-yellow flex justify-center items-center rounded-full"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></div></a></nav></div><div class="hidden lg:block lg:w-[20.83%] pl-8 mt-12"><div class="sticky top-28"><div class="border-l-solid border-gray-200 pl-4"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-ai-9010-problem-why-speed-becomes-paralysis" class="table-of-contents__link toc-highlight">The AI 90/10 Problem: Why Speed Becomes Paralysis</a></li><li><a href="#simple-vs-easy-the-foundation-of-ai-friendly-architecture" class="table-of-contents__link toc-highlight">Simple vs Easy: The Foundation of AI Friendly Architecture</a></li><li><a href="#the-five-principles-hickeys-blueprint" class="table-of-contents__link toc-highlight">The Five Principles: Hickey&#39;s Blueprint</a><ul><li><a href="#principle-1-avoid-complecting" class="table-of-contents__link toc-highlight">Principle 1: Avoid Complecting</a></li><li><a href="#principle-2-separate-state-from-value" class="table-of-contents__link toc-highlight">Principle 2: Separate State from Value</a></li><li><a href="#principle-3-data-as-data-not-objects" class="table-of-contents__link toc-highlight">Principle 3: Data as Data, Not Objects</a></li><li><a href="#principle-4-functions-over-methods" class="table-of-contents__link toc-highlight">Principle 4: Functions Over Methods</a></li><li><a href="#principle-5-composition-over-inheritance" class="table-of-contents__link toc-highlight">Principle 5: Composition Over Inheritance</a></li></ul></li><li><a href="#making-architecture-more-constraining-one-way-to-win" class="table-of-contents__link toc-highlight">Making Architecture More Constraining: One Way to Win</a><ul><li><a href="#constraint-1-immutable-data-zero-exceptions" class="table-of-contents__link toc-highlight">Constraint 1: Immutable Data, Zero Exceptions</a></li><li><a href="#constraint-2-data-separated-from-behavior" class="table-of-contents__link toc-highlight">Constraint 2: Data Separated from Behavior</a></li><li><a href="#constraint-3-explicit-error-context-no-exceptions" class="table-of-contents__link toc-highlight">Constraint 3: Explicit Error Context, No Exceptions</a></li><li><a href="#constraint-4-pure-functions-over-methods" class="table-of-contents__link toc-highlight">Constraint 4: Pure Functions Over Methods</a></li><li><a href="#constraint-5-composition-over-inheritance" class="table-of-contents__link toc-highlight">Constraint 5: Composition Over Inheritance</a></li></ul></li><li><a href="#how-constraints-teach-ai-better-patterns" class="table-of-contents__link toc-highlight">How Constraints Teach AI Better Patterns</a><ul><li><a href="#1-constrain-generation-dont-guide-review" class="table-of-contents__link toc-highlight">1. <strong>Constrain Generation, Don&#39;t Guide Review</strong></a></li><li><a href="#2-one-way-to-win" class="table-of-contents__link toc-highlight">2. <strong>One Way to Win</strong></a></li><li><a href="#3-good-code--reviewable-code" class="table-of-contents__link toc-highlight">3. <strong>Good Code = Reviewable Code</strong></a></li><li><a href="#4-teach-through-structure" class="table-of-contents__link toc-highlight">4. <strong>Teach Through Structure</strong></a></li></ul></li><li><a href="#results-constraints-create-freedom" class="table-of-contents__link toc-highlight">Results: Constraints Create Freedom</a></li><li><a href="#conclusion-solving-the-9010-problem" class="table-of-contents__link toc-highlight">Conclusion: Solving the 90/10 Problem</a><ul><li><a href="#domain-layer-pure-information-principles-1-2-3" class="table-of-contents__link toc-highlight">Domain Layer: Pure Information (Principles 1, 2, 3)</a></li><li><a href="#service-layer-focused-abstractions-principles-4-5" class="table-of-contents__link toc-highlight">Service Layer: Focused Abstractions (Principles 4, 5)</a></li><li><a href="#infrastructure-layer-simple-capabilities-principle-5" class="table-of-contents__link toc-highlight">Infrastructure Layer: Simple Capabilities (Principle 5)</a></li><li><a href="#error-handling-explicit-context-principle-1" class="table-of-contents__link toc-highlight">Error Handling: Explicit Context (Principle 1)</a></li><li><a href="#testing-properties-over-implementation-all-principles" class="table-of-contents__link toc-highlight">Testing: Properties Over Implementation (All Principles)</a></li></ul></li></ul></div></div></div></div></div></div></div><footer class="flex flex-col relative w-full relative px-4 py-8 lg:px-40 lg:pt-20 lg:pb-0 bg-tailCall-dark-700 grid-dark gap-4 lg:gap-8"><div class="grid grid-cols-2 gap-8 lg:flex lg:gap-32 xl:gap-64 w-full z-10"><span class="text-2xl font-semibold text-tailCall-white col-span-2 h-10 flex items-center"><img src="/images/home/logo-light.svg" alt="footer logo" height="30"></span><div class="flex flex-col gap-4 lg:gap-6"><span class="text-content-small font-bold lg:text-title-small text-tailCall-white leading-[20px] lg:leading-[26px]">Developers</span><a class="text-content-small lg:text-content-medium text-tailCall-light-500 hover:text-tailCall-light-300 hover:no-underline leading-[20px] lg:leading-[26px]" href="/docs/">Docs</a><a class="text-content-small lg:text-content-medium text-tailCall-light-500 hover:text-tailCall-light-300 hover:no-underline leading-[20px] lg:leading-[26px]" href="/blog/">Blogs</a><a class="text-content-small lg:text-content-medium text-tailCall-light-500 hover:text-tailCall-light-300 hover:no-underline leading-[20px] lg:leading-[26px]" href="/releases/">Releases</a></div><div class="flex flex-col gap-4 lg:gap-6"><span class="text-content-small font-bold lg:text-title-small text-tailCall-white leading-[20px] lg:leading-[26px]">Company</span><a class="text-content-small lg:text-content-medium text-tailCall-light-500 hover:text-tailCall-light-300 hover:no-underline leading-[20px] lg:leading-[26px]" href="/pricing/">Pricing</a><a class="text-content-small lg:text-content-medium text-tailCall-light-500 hover:text-tailCall-light-300 hover:no-underline leading-[20px] lg:leading-[26px]" href="/privacy/">Privacy Policy</a><a href="https://forms.gle/F8dQkLqtCsFwctLa6" target="_blank" rel="noopener noreferrer" class="text-content-small lg:text-content-medium text-tailCall-light-500 hover:text-tailCall-light-300 hover:no-underline leading-[20px] lg:leading-[26px]">We&#x27;re Hiring</a></div></div><div class="flex flex-col lg:flex-row items-center lg:justify-between w-[100%] lg:w-full z-10 py-2 lg:py-6 gap-2 lg:gap-0"><p class="text-content-mini lg:text-content-tiny text-tailCall-light-700 font-space-mono font-normal cursor-pointer mb-0">Cookie Settings</p><p class="text-content-mini lg:text-content-tiny text-tailCall-light-700 font-space-mono font-normal mb-0">Copyright Â© <!-- -->2025<!-- --> Tailcall, Inc.</p><div class="space-x-SPACE_04"><a href="https://github.com/antinomyhq/forge" target="_blank" rel="noopener noreferrer" class="cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="h-6 w-6"><g clip-path="url(#a)"><path fill="#B6B6B7" fill-rule="evenodd" d="M11.967 1C5.903 1 1 6.042 1 12.279c0 4.986 3.141 9.206 7.5 10.7.544.112.743-.243.743-.542 0-.261-.017-1.157-.017-2.091C6.175 21.018 5.539 19 5.539 19c-.49-1.307-1.216-1.643-1.216-1.643-.999-.69.072-.69.072-.69 1.108.074 1.69 1.157 1.69 1.157.98 1.718 2.56 1.232 3.195.934.09-.729.381-1.233.69-1.513-2.433-.261-4.993-1.232-4.993-5.565 0-1.232.435-2.24 1.125-3.025-.109-.28-.49-1.438.11-2.988 0 0 .925-.298 3.013 1.158a10.3 10.3 0 0 1 2.742-.373c.926 0 1.87.13 2.742.373 2.088-1.456 3.014-1.158 3.014-1.158.6 1.55.218 2.708.109 2.988.708.784 1.126 1.793 1.126 3.025 0 4.333-2.56 5.285-5.012 5.565.4.355.745 1.027.745 2.092 0 1.512-.018 2.726-.018 3.1 0 .298.2.653.744.54 4.358-1.493 7.5-5.713 7.5-10.7C22.933 6.043 18.013 1 11.966 1" clip-rule="evenodd"></path></g><defs><clipPath id="a"><path fill="#fff" d="M1 1h22v22H1z"></path></clipPath></defs></svg></a><a href="https://discord.gg/kRZBPpkgwq" target="_blank" rel="noopener noreferrer" class="cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="h-6 w-6"><mask id="a" width="20" height="16" x="2" y="4" maskUnits="userSpaceOnUse" style="mask-type:luminance"><path fill="#fff" d="M22 4H2v16h20z"></path></mask><g mask="url(#a)"><path fill="#B6B6B7" d="M18.93 5.425a16.1 16.1 0 0 0-4.07-1.304.06.06 0 0 0-.066.032c-.175.323-.37.744-.506 1.075a14.8 14.8 0 0 0-4.573 0A11 11 0 0 0 9.2 4.153a.06.06 0 0 0-.065-.032 16 16 0 0 0-4.07 1.304.06.06 0 0 0-.028.024c-2.593 4-3.303 7.902-2.954 11.756a.07.07 0 0 0 .026.048 16.4 16.4 0 0 0 4.994 2.608.06.06 0 0 0 .07-.024 12.3 12.3 0 0 0 1.022-1.716.066.066 0 0 0-.035-.091 11 11 0 0 1-1.56-.768.068.068 0 0 1-.007-.11q.159-.122.31-.251a.06.06 0 0 1 .065-.01c3.273 1.544 6.817 1.544 10.051 0a.06.06 0 0 1 .066.01c.1.084.205.17.31.25a.068.068 0 0 1-.005.11q-.747.45-1.561.768a.067.067 0 0 0-.034.091c.3.601.643 1.173 1.02 1.716a.06.06 0 0 0 .07.025 16.3 16.3 0 0 0 5.003-2.608.07.07 0 0 0 .026-.047c.417-4.455-.699-8.325-2.957-11.756a.05.05 0 0 0-.026-.025M8.684 14.86c-.985 0-1.797-.935-1.797-2.082 0-1.148.796-2.082 1.797-2.082 1.01 0 1.814.943 1.798 2.082 0 1.147-.796 2.082-1.798 2.082m6.646 0c-.985 0-1.797-.935-1.797-2.082 0-1.148.796-2.082 1.797-2.082 1.009 0 1.813.943 1.797 2.082 0 1.147-.788 2.082-1.797 2.082"></path></g></svg></a><a href="https://www.linkedin.com/company/forgecodehq" target="_blank" rel="noopener noreferrer" class="cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="h-6 w-6"><mask id="a" width="18" height="18" x="3" y="3" maskUnits="userSpaceOnUse" style="mask-type:luminance"><path fill="#fff" d="M21 3H3v18h18z"></path></mask><g mask="url(#a)"><path fill="#B6B6B7" d="M8.178 19V9.554H5.177V19zm-1.5-10.736c1.046 0 1.698-.725 1.698-1.632C8.356 5.705 7.724 5 6.698 5 5.671 5 5 5.705 5 6.632c0 .907.651 1.632 1.658 1.632zM9.84 19h3.001v-5.275c0-.282.02-.564.099-.766.217-.564.71-1.148 1.54-1.148 1.086 0 1.52.866 1.52 2.136V19H19v-5.416c0-2.902-1.48-4.252-3.455-4.252-1.619 0-2.33.947-2.725 1.591h.02v-1.37h-3c.039.887 0 9.447 0 9.447"></path></g></svg></a><a href="https://x.com/forgecodehq" target="_blank" rel="noopener noreferrer" class="cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" viewBox="0 0 28 28" class="h-6 w-6"><path fill="#B6B6B7" d="M18.745 6.428h2.53l-5.528 6.318 6.503 8.597h-5.092l-3.988-5.215-4.563 5.215H6.076l5.912-6.758L5.75 6.428h5.22l3.605 4.766zm-.888 13.4h1.402l-9.05-11.965H8.705z"></path></svg></a></div></div></footer></div>
</body>
</html>