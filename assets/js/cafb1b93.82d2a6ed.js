"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7138],{7375:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>a});var t=s(9468),i=s(4848),r=s(8453);const l={slug:"gcp-cloudflare-anthropic-outage",title:"When Google Sneezes, the Whole World Catches a Cold",authors:["forge"],tags:["Cloud","SRE","Incident Analysis","DevOps"],date:new Date("2025-06-12T00:00:00.000Z"),description:"Deep dive into the IAM failure that took down Google Cloud, cascaded into Cloudflare and Anthropic, and rippled across dozens of internet services.",hide_table_of_contents:!1,image:"/images/blog/outage-cover.jpeg"},o=void 0,d={authorsImageUrls:[void 0]},a=[{value:"1. Timeline at a Glance",id:"1-timeline-at-a-glance",level:2},{value:"2. What Broke Inside Google Cloud",id:"2-what-broke-inside-google-cloud",level:2},{value:"2.1 Suspected Trigger",id:"21-suspected-trigger",level:3},{value:"2.2 Customer Impact Checklist",id:"22-customer-impact-checklist",level:3},{value:"3. Cloudflare\u2019s Dependency Chain Reaction",id:"3-cloudflares-dependency-chain-reaction",level:2},{value:"3.1 Domino Effects",id:"31-domino-effects",level:3},{value:"4. Anthropic Caught in the Crossfire",id:"4-anthropic-caught-in-the-crossfire",level:2},{value:"5. Lessons for Engineers",id:"5-lessons-for-engineers",level:2},{value:"6. Still Waiting for the Full RCAs",id:"6-still-waiting-for-the-full-rcas",level:2},{value:"7. Updated Analysis: What Google&#39;s Official Timeline Tells Us",id:"7-updated-analysis-what-googles-official-timeline-tells-us",level:2},{value:"8.1 Root Cause Identification",id:"81-root-cause-identification",level:3},{value:"8.2 Phased Recovery Pattern",id:"82-phased-recovery-pattern",level:3},{value:"8.3 The Long Tail Effect",id:"83-the-long-tail-effect",level:3},{value:"8. Wrap Up",id:"8-wrap-up",level:2}];function c(e){const n={blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"TL;DR"})," Google Cloud's global IAM service glitched at 10:50\u202fAM PT, causing authentication failures across dozens of GCP products. Cloudflare's Workers KV which depends on a Google hosted backing store followed suit, knocking out Access, WARP and other Zero Trust features. Anthropic, which runs on GCP, lost file uploads and saw elevated error rates. Seven and a half hours later, full mitigations were complete and all services recovered. Let\u2019s unpack the chain reaction."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"1-timeline-at-a-glance",children:"1. Timeline at a Glance"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Time (PT)"}),(0,i.jsx)(n.th,{children:"Signal"}),(0,i.jsx)(n.th,{children:"What We Saw"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"10:51"})}),(0,i.jsx)(n.td,{children:"Internal alerts"}),(0,i.jsx)(n.td,{children:"GCP SRE receives spikes in 5xx from IAM endpoints"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"11:05"})}),(0,i.jsx)(n.td,{children:"DownDetector"}),(0,i.jsx)(n.td,{children:"User reports for Gmail, Drive, Meet skyrocket"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"11:19"})}),(0,i.jsx)(n.td,{children:"Cloudflare status"}),(0,i.jsx)(n.td,{children:"\u201cInvestigating widespread Access failures\u201d"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"11:25"})}),(0,i.jsx)(n.td,{children:"Anthropic status"}),(0,i.jsx)(n.td,{children:"Image and file uploads disabled to cut error volume"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"12:12"})}),(0,i.jsx)(n.td,{children:"Cloudflare update"}),(0,i.jsx)(n.td,{children:"Root cause isolated to third\u2011party KV dependency"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"12:41"})}),(0,i.jsx)(n.td,{children:"Google update"}),(0,i.jsx)(n.td,{children:"Mitigation rolled out to IAM fleet, most regions healthy"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"13:30"})}),(0,i.jsx)(n.td,{children:"Cloudflare green"}),(0,i.jsx)(n.td,{children:"Access, KV and WARP back online worldwide"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"14:05"})}),(0,i.jsx)(n.td,{children:"Anthropic green"}),(0,i.jsx)(n.td,{children:"Full recovery, Claude stable"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"15:16"})}),(0,i.jsx)(n.td,{children:"Google update"}),(0,i.jsx)(n.td,{children:"Most GCP products fully recovered as of 13:45 PDT"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"16:13"})}),(0,i.jsx)(n.td,{children:"Google update"}),(0,i.jsx)(n.td,{children:"Residual impact on Dataflow, Vertex AI, PSH only"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"17:10"})}),(0,i.jsx)(n.td,{children:"Google update"}),(0,i.jsx)(n.td,{children:"Dataflow fully resolved except us-central1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"17:33"})}),(0,i.jsx)(n.td,{children:"Google update"}),(0,i.jsx)(n.td,{children:"Personalized Service Health impact resolved"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"18:18"})}),(0,i.jsx)(n.td,{children:"Google final"}),(0,i.jsx)(n.td,{children:"Vertex AI Online Prediction fully recovered, all clear"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"18:27"})}),(0,i.jsx)(n.td,{children:"Google postmortem"}),(0,i.jsx)(n.td,{children:"Internal investigation underway, analysis to follow"})]})]})]}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"Click to expand raw status snippets"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:'11:19 PT  Cloudflare: "We are investigating an issue causing Access authentication to fail. Cloudflare Workers KV is experiencing elevated errors."\n11:47 PT  Google Cloud: "Multiple products are experiencing impact due to an IAM service issue. Our engineers have identified the root cause and mitigation is in progress."\n12:12 PT  Cloudflare: "Workers KV dependency outage confirmed. All hands working with third\u2011party vendor to restore service."\n'})})]}),"\n",(0,i.jsx)(n.h2,{id:"2-what-broke-inside-google-cloud",children:"2. What Broke Inside Google Cloud"}),"\n",(0,i.jsxs)(n.p,{children:["GCP\u2019s ",(0,i.jsx)(n.strong,{children:"Identity and Access Management (IAM)"})," is the front door every API call must pass. When the fleet that issues and validates OAuth and service account tokens misbehaves, the blast radius reaches storage, compute, control planes essentially everything."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Screenshot of GCP status dashboard at 11:30\u202fAM PT showing red for IAM, Cloud Storage, Bigtable",src:s(2512).A+"",width:"1200",height:"1229"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Figure 1: GCP status page during the first hour"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"21-suspected-trigger",children:"2.1 Suspected Trigger"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Google\u2019s initial incident summary refers to an ",(0,i.jsx)(n.strong,{children:"IAM back\u2011end rollout issue"})," indicating that a routine update to the IAM service introduced an error that spread before standard canary checks could catch it."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Engineers inside Google reportedly rolled back the binary and purged bad configs, then forced token cache refresh across regions. us\u2011central1 lagged behind because it hosts quorum shards for IAM metadata."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"22-customer-impact-checklist",children:"2.2 Customer Impact Checklist"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Cloud Storage: 403 and 500 errors on signed URL fetches"}),"\n",(0,i.jsx)(n.li,{children:"Cloud SQL and Bigtable: auth failures on connection open"}),"\n",(0,i.jsx)(n.li,{children:"Workspace: Gmail, Calendar, Meet intermittently 503"}),"\n",(0,i.jsx)(n.li,{children:"Vertex AI, Dialogflow, Apigee: elevated latency then traffic drops"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"3-cloudflares-dependency-chain-reaction",children:"3. Cloudflare\u2019s Dependency Chain Reaction"}),"\n",(0,i.jsxs)(n.p,{children:["Cloudflare\u2019s ",(0,i.jsx)(n.strong,{children:"Workers KV"})," stores billions of key\u2011value entries and replicates them across 270+ edge locations. The hot path is in Cloudflare\u2019s own data centers, but the ",(0,i.jsx)(n.strong,{children:"persistent back\u2011end"})," is a multi\u2011region database hosted on Google Cloud. When IAM refused new tokens, Writes and eventually Reads to the backing store timed out."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Cloudflare status excerpt highlighting Access, KV and WARP as degraded",src:s(2660).A+"",width:"1200",height:"550"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Figure 2: Cloudflare status excerpt highlighting Access, KV and WARP as degraded"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"31-domino-effects",children:"3.1 Domino Effects"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cloudflare Access"})," uses KV to store session state -> login loops"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"WARP"})," stores Zero Trust device posture in KV -> client could not handshake"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Durable Objects (SQLite)"})," relied on KV for metadata -> subset of DOs failed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"AI Gateway and Workers AI"})," experienced cold\u2011start errors due to missing model manifests in KV"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Cloudflare\u2019s incident commander declared a ",(0,i.jsx)(n.em,{children:"Code Orange"})," their highest severity and spun up a cross\u2011vendor bridge with Google engineers. Once IAM mitigation took hold, KV reconnected and the edge quickly self\u2011healed."]}),"\n",(0,i.jsx)(n.h2,{id:"4-anthropic-caught-in-the-crossfire",children:"4. Anthropic Caught in the Crossfire"}),"\n",(0,i.jsxs)(n.p,{children:["Anthropic hosts Claude on GCP. The immediate failure mode was ",(0,i.jsx)(n.strong,{children:"file upload"})," (hits Cloud Storage) and ",(0,i.jsx)(n.strong,{children:"image vision"})," features, while raw text prompts sometimes succeeded due to cached tokens."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:'[12:07 PT] status.anthropic.com: "We have disabled uploads to reduce error volume while the upstream GCP incident is in progress. Text queries remain available though elevated error rates persist."\n'})}),"\n",(0,i.jsx)(n.p,{children:"Anthropic throttled traffic to keep the service partially usable, then restored uploads after Google\u2019s IAM fleet was stable."}),"\n",(0,i.jsx)(n.h2,{id:"5-lessons-for-engineers",children:"5. Lessons for Engineers"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Control plane failures hurt more than data plane faults."})," Data replication across zones cannot save you if auth is down."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check hidden dependencies."})," Cloudflare is multi\u2011cloud at the edge, yet a single\u2011vendor choice deep in the stack still cascaded."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Status pages must be fast and honest."})," Google took nearly an hour to flip the incident flag. Customers were debugging ghosts meanwhile."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Design an emergency bypass."})," If your auth proxy (Cloudflare Access) fails, can you temporarily route around it?"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Chaos drills still matter."})," Rare multi\u2011provider events happen and the playbooks must be rehearsed."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"6-still-waiting-for-the-full-rcas",children:"6. Still Waiting for the Full RCAs"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Google will publish a postmortem once internal review wraps expect details on the faulty rollout, scope of blast radius and planned guardrails."}),"\n",(0,i.jsx)(n.li,{children:"Cloudflare traditionally ships a forensic blog within a week. Watch for specifics on Workers KV architecture and new redundancy layers."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"GIF of refreshing Cloudflare status page ",src:s(1435).A+"",width:"1024",height:"1536"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Figure 3: What every SRE did for two hours straight"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"7-updated-analysis-what-googles-official-timeline-tells-us",children:"7. Updated Analysis: What Google's Official Timeline Tells Us"}),"\n",(0,i.jsx)(n.p,{children:"Google's detailed incident timeline reveals several important details not visible from external monitoring:"}),"\n",(0,i.jsx)(n.h3,{id:"81-root-cause-identification",children:"8.1 Root Cause Identification"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"12:41 PDT"}),": Google engineers identified root cause and applied mitigations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"13:16 PDT"}),": Infrastructure recovered in all regions ",(0,i.jsx)(n.strong,{children:"except us-central1"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"14:00 PDT"}),": Mitigation implemented for us-central1 and multi-region/us"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The fact that us-central1 lagged significantly behind suggests this region hosts critical infrastructure components that require special handling during recovery operations."}),"\n",(0,i.jsx)(n.h3,{id:"82-phased-recovery-pattern",children:"8.2 Phased Recovery Pattern"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Infrastructure Layer"})," (12:41-13:16): Underlying dependency fixed globally except one region"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Product Layer"})," (13:45): Most GCP products recovered, some residual impact"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Specialized Services"})," (17:10-18:18): Complex services like Dataflow and Vertex AI required additional time"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"83-the-long-tail-effect",children:"8.3 The Long Tail Effect"}),"\n",(0,i.jsxs)(n.p,{children:["Even after the root cause was fixed, some services took ",(0,i.jsx)(n.strong,{children:"5+ additional hours"})," to fully recover:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Dataflow"}),": Backlog clearing in us-central1 until 17:10 PDT"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Vertex AI"}),": Model Garden 5xx errors persisted until 18:18 PDT"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Personalized Service Health"}),": Delayed updates until 17:33 PDT"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["This demonstrates how cascading failures create ",(0,i.jsx)(n.strong,{children:"recovery debt"})," that extends far beyond the initial fix."]}),"\n",(0,i.jsx)(n.h2,{id:"8-wrap-up",children:"8. Wrap Up"}),"\n",(0,i.jsx)(n.p,{children:"At 10:50\u202fAM a bug in a single Google Cloud service took down authentication worldwide. Within half an hour that failure reached Cloudflare and Anthropic. By 1:30\u202fPM everything was green again, but not before reminding the internet just how tangled our dependencies are."}),"\n",(0,i.jsx)(n.p,{children:"Keep an eye out for the official RCAs. Meanwhile, update your incident playbooks, test your failovers and remember that sometimes the cloud\u2019s biggest danger is a bad config on a Tuesday."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},2660:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/cloudflare-creative-3cf427703ebd28a53fc95aaeb5cf6d25.png"},2512:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/google-creative-4501089f1fbbea98790ae88114bcd06b.png"},1435:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/refresh-meme-e5576db1977ebe41b6ed457dfec2d4f0.png"},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var t=s(6540);const i={},r=t.createContext(i);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:n},e.children)}},9468:e=>{e.exports=JSON.parse('{"permalink":"/blog/gcp-cloudflare-anthropic-outage","source":"@site/blog/12-jun-2025-outage.md","title":"When Google Sneezes, the Whole World Catches a Cold","description":"Deep dive into the IAM failure that took down Google Cloud, cascaded into Cloudflare and Anthropic, and rippled across dozens of internet services.","date":"2025-06-12T00:00:00.000Z","tags":[{"inline":true,"label":"Cloud","permalink":"/blog/tags/cloud"},{"inline":true,"label":"SRE","permalink":"/blog/tags/sre"},{"inline":true,"label":"Incident Analysis","permalink":"/blog/tags/incident-analysis"},{"inline":true,"label":"DevOps","permalink":"/blog/tags/dev-ops"}],"readingTime":6.2,"hasTruncateMarker":true,"authors":[{"name":"The Forge Team","url":"https://github.com/antinomyhq/forge","social":[{"platform":"github","url":"https://github.com/antinomyhq/forge"},{"platform":"website","url":"https://forgecode.dev"},{"platform":"twitter","url":"https://x.com/forgecodehq"},{"platform":"linkedin","url":"https://www.linkedin.com/company/forgecodehq/"}],"imageURL":"/images/favicon-light.svg","key":"forge","page":null}],"frontMatter":{"slug":"gcp-cloudflare-anthropic-outage","title":"When Google Sneezes, the Whole World Catches a Cold","authors":["forge"],"tags":["Cloud","SRE","Incident Analysis","DevOps"],"date":"2025-06-12T00:00:00.000Z","description":"Deep dive into the IAM failure that took down Google Cloud, cascaded into Cloudflare and Anthropic, and rippled across dozens of internet services.","hide_table_of_contents":false,"image":"/images/blog/outage-cover.jpeg"},"unlisted":false,"prevItem":{"title":"MCP Security is Broken: Here\'s How to Fix It","permalink":"/blog/prevent-attacks-on-mcp-part2"},"nextItem":{"title":"To index or not to index: which coding agent to chose?","permalink":"/blog/index-vs-no-index-ai-code-agents"}}')}}]);