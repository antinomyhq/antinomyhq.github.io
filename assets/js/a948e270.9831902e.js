"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2805],{1619:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"custom-workflows","title":"Custom Workflows & Multi-Agent Systems","description":"Create and configure custom workflows with multiple specialized agents in Forge.","source":"@site/docs/custom-workflows.mdx","sourceDirName":".","slug":"/custom-workflows","permalink":"/docs/custom-workflows","draft":false,"unlisted":false,"editUrl":"https://github.com/antinomyhq/antinomyhq.github.io/tree/main/docs/custom-workflows.mdx","tags":[],"version":"current","lastUpdatedAt":1743502566000,"sidebarPosition":4,"frontMatter":{"title":"Custom Workflows & Multi-Agent Systems","sidebar_position":4,"description":"Create and configure custom workflows with multiple specialized agents in Forge.","sidebar_label":"Custom Workflows"}}');var i=t(4848),s=t(8453);const r={title:"Custom Workflows & Multi-Agent Systems",sidebar_position:4,description:"Create and configure custom workflows with multiple specialized agents in Forge.",sidebar_label:"Custom Workflows"},l="Custom Workflows & Multi-Agent Systems",a={},c=[{value:"Multi-Agent Architecture Overview",id:"multi-agent-architecture-overview",level:2},{value:"Creating Custom Workflows",id:"creating-custom-workflows",level:2},{value:"Configuration Loading and Precedence",id:"configuration-loading-and-precedence",level:3},{value:"Workflow Configuration Structure",id:"workflow-configuration-structure",level:2},{value:"Event System",id:"event-system",level:3},{value:"Built-in Events",id:"built-in-events",level:4},{value:"Agent Tools",id:"agent-tools",level:3},{value:"Built-in Tools",id:"built-in-tools",level:4},{value:"Agent Configuration Options",id:"agent-configuration-options",level:3},{value:"Built-in Templates",id:"built-in-templates",level:3},{value:"Example Workflow Configuration",id:"example-workflow-configuration",level:2},{value:"Advanced Configuration Examples",id:"advanced-configuration-examples",level:2},{value:"Context Compaction Configuration",id:"context-compaction-configuration",level:3},{value:"Temperature Configuration",id:"temperature-configuration",level:3},{value:"Agent Visibility Control",id:"agent-visibility-control",level:3},{value:"Rich Display Configuration",id:"rich-display-configuration",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"custom-workflows--multi-agent-systems",children:"Custom Workflows & Multi-Agent Systems"})}),"\n",(0,i.jsx)(n.p,{children:"For complex tasks, a single agent may not be sufficient. Forge allows you to create custom workflows with multiple specialized agents working together to accomplish sophisticated tasks."}),"\n",(0,i.jsx)(n.h2,{id:"multi-agent-architecture-overview",children:"Multi-Agent Architecture Overview"}),"\n",(0,i.jsx)(n.p,{children:"Forge implements a sophisticated multi-agent architecture that enables specialized agents to collaborate on complex tasks. This distributed approach to problem-solving provides several technical advantages:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Specialization"}),": Agents can focus on specific tasks they excel at"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Efficiency"}),": Smaller models can handle simpler tasks, saving resources"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parallelization"}),": Multiple agents can work simultaneously on different aspects of a problem"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Collaboration"}),": Agents can share information and build upon each other's work"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"creating-custom-workflows",children:"Creating Custom Workflows"}),"\n",(0,i.jsxs)(n.p,{children:["You can configure your own workflows by creating a YAML file and pointing to it with the ",(0,i.jsx)(n.code,{children:"-w"})," flag:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"forge -w /path/to/your/workflow.yaml\n"})}),"\n",(0,i.jsx)(n.h3,{id:"configuration-loading-and-precedence",children:"Configuration Loading and Precedence"}),"\n",(0,i.jsx)(n.p,{children:"Forge loads workflow configurations using the following precedence rules:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Explicit Path"}),": When a path is provided with the ",(0,i.jsx)(n.code,{children:"-w"})," flag, Forge loads that configuration directly without any merging"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Project Configuration"}),": If no explicit path is provided, Forge looks for ",(0,i.jsx)(n.code,{children:"forge.yaml"})," in the current directory"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Default Configuration"}),": An embedded default configuration is always available as a fallback"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"When a project configuration exists in the current directory, Forge creates a merged configuration where:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Project settings in ",(0,i.jsx)(n.code,{children:"forge.yaml"})," take precedence over default settings"]}),"\n",(0,i.jsx)(n.li,{children:"Any settings not specified in the project configuration inherit from defaults"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This approach allows you to customize only the parts of the configuration you need while inheriting sensible defaults for everything else."}),"\n",(0,i.jsx)(n.h2,{id:"workflow-configuration-structure",children:"Workflow Configuration Structure"}),"\n",(0,i.jsx)(n.p,{children:"A workflow consists of agents connected via events. Each agent has specific capabilities and can perform designated tasks."}),"\n",(0,i.jsx)(n.h3,{id:"event-system",children:"Event System"}),"\n",(0,i.jsx)(n.p,{children:"Agents communicate through events which they can publish and subscribe to:"}),"\n",(0,i.jsx)(n.h4,{id:"built-in-events",children:"Built-in Events"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"user_task_init"})," - Published when a new task is initiated"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"user_task_update"})," - Published when follow-up instructions are provided by the user"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"agent-tools",children:"Agent Tools"}),"\n",(0,i.jsxs)(n.p,{children:["Each agent needs tools to perform tasks, configured in the ",(0,i.jsx)(n.code,{children:"tools"})," field:"]}),"\n",(0,i.jsx)(n.h4,{id:"built-in-tools",children:"Built-in Tools"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool_forge_fs_read"})," - Read from the filesystem"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool_forge_fs_create"})," - Create or overwrite files"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool_forge_fs_remove"})," - Remove files"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool_forge_fs_search"})," - Search for patterns in files"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool_forge_fs_list"})," - List files in a directory"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool_forge_fs_info"})," - Get file metadata"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool_forge_process_shell"})," - Execute shell commands"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool_forge_process_think"})," - Perform internal reasoning"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool_forge_net_fetch"})," - Fetch data from the internet"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool_forge_event_dispatch"})," - Dispatch events to other agents"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool_forge_fs_patch"})," - Patch existing files"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"agent-configuration-options",children:"Agent Configuration Options"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"id"})," - Unique identifier for the agent"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"model"})," - AI model to use (from the ",(0,i.jsx)(n.code,{children:"\\models"})," list)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"temperature"})," - Control response determinism and creativity (0.0-2.0)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tools"})," - List of tools the agent can use"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"subscribe"})," - Events the agent listens to"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ephemeral"})," - If true, agent is destroyed after task completion"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool_supported"})," - (Optional) Boolean flag that determines whether tools defined in the agent configuration are actually made available to the LLM"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"system_prompt"})," - (Optional) Instructions for how the agent should behave"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"user_prompt"})," - (Optional) Format for user inputs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"hide_content"})," - (Optional) When true, agent responses aren't displayed in console"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"compact"})," - (Optional) Configuration for automatic context summarization"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"max_walker_depth"})," - (Optional) Maximum directory/file depth for exploration"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"built-in-templates",children:"Built-in Templates"}),"\n",(0,i.jsx)(n.p,{children:"Forge provides templates to simplify system prompt creation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"system-prompt-engineer.hbs"})," - Template for engineering tasks"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"system-prompt-title-generator.hbs"})," - Template for generating descriptive titles"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"system-prompt-advocate.hbs"})," - Template for user advocacy and explanation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"partial-tool-information.hbs"})," - Tool documentation for agents"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"partial-tool-examples.hbs"})," - Usage examples for tools"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Use these templates with the syntax: ",(0,i.jsx)(n.code,{children:"{{> name-of-the-template.hbs }}"})]}),"\n",(0,i.jsx)(n.h2,{id:"example-workflow-configuration",children:"Example Workflow Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'variables:\n  models:\n    advanced_model: &advanced_model anthropic/claude-3.7-sonnet\n    efficiency_model: &efficiency_model anthropic/claude-3.5-haiku\n\nagents:\n  - id: title_generation_worker\n    model: *efficiency_model\n    tools:\n      - tool_forge_event_dispatch\n    subscribe:\n      - user_task_init\n    tool_supported: false # Force XML-based tool call formatting\n    system_prompt: "{{> system-prompt-title-generator.hbs }}"\n    user_prompt: <technical_content>{{event.value}}</technical_content>\n\n  - id: background_researcher\n    model: *efficiency_model\n    temperature: 0.3 # Lower temperature for more deterministic responses\n    hide_content: true # Responses won\'t appear in console\n    tools:\n      - tool_forge_net_fetch\n      - tool_forge_event_dispatch\n      - tool_forge_process_think\n    subscribe:\n      - research_request\n    system_prompt: "{{> system-prompt-researcher.hbs }}"\n\n  - id: developer\n    model: *advanced_model\n    temperature: 0.7 # Balanced creativity and determinism\n    tools:\n      - tool_forge_fs_read\n      - tool_forge_fs_create\n      - tool_forge_fs_remove\n      - tool_forge_fs_patch\n      - tool_forge_process_shell\n      - tool_forge_net_fetch\n      - tool_forge_fs_search\n      - tool_forge_display_show_user # Rich markdown display tool\n    subscribe:\n      - user_task_init\n      - user_task_update\n      - research_results\n    max_walker_depth: 1024 # Maximum directory exploration depth\n    compact:\n      max_tokens: 2000 # Maximum tokens for summary\n      token_threshold: 80000 # When to trigger compaction\n      model: *efficiency_model\n      retention_window: 6 # Recent messages to preserve\n    ephemeral: false\n    tool_supported: true # Use model\'s native tool call format (default)\n    system_prompt: "{{> system-prompt-engineer.hbs }}"\n    user_prompt: |\n      <task>{{event.value}}</task>\n'})}),"\n",(0,i.jsx)(n.p,{children:"This example workflow creates three agents:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"A title generation worker that creates meaningful titles for user conversations"}),"\n",(0,i.jsx)(n.li,{children:"A background researcher that fetches information without displaying its work in the console"}),"\n",(0,i.jsx)(n.li,{children:"A developer agent that can perform comprehensive file and system operations with context compaction enabled"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"advanced-configuration-examples",children:"Advanced Configuration Examples"}),"\n",(0,i.jsx)(n.h3,{id:"context-compaction-configuration",children:"Context Compaction Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Enable automatic context management to maintain lengthy conversations:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'agents:\n  - id: assistant\n    model: anthropic/claude-3.5-sonnet\n    compact:\n      max_tokens: 2000 # Maximum tokens for summary\n      token_threshold: 80000 # When to trigger compaction\n      model: google/gemini-2.0-flash-001 # Fast model for summarization\n      retention_window: 6 # Recent messages to preserve\n      prompt: "{{> system-prompt-context-summarizer.hbs }}" # Custom prompt\n'})}),"\n",(0,i.jsx)(n.h3,{id:"temperature-configuration",children:"Temperature Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Control agent creativity and determinism with temperature settings:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"agents:\n  # Precise, deterministic coding agent\n  - id: code_generator\n    model: anthropic/claude-3.5-sonnet\n    temperature: 0.1 # Very deterministic for consistent code\n\n  # Balanced general assistant\n  - id: assistant\n    model: anthropic/claude-3.5-sonnet\n    temperature: 0.7 # Default balanced setting\n\n  # Creative content generator\n  - id: creative_writer\n    model: anthropic/claude-3.5-sonnet\n    temperature: 1.2 # Higher creativity for brainstorming\n"})}),"\n",(0,i.jsx)(n.h3,{id:"agent-visibility-control",children:"Agent Visibility Control"}),"\n",(0,i.jsx)(n.p,{children:"Hide background agent responses from the console:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"agents:\n  # Background helper that works silently\n  - id: background_helper\n    model: anthropic/claude-3.5-haiku\n    hide_content: true\n\n  # Main agent that displays its responses\n  - id: main_agent\n    model: anthropic/claude-3.5-sonnet\n    # hide_content defaults to false\n"})}),"\n",(0,i.jsx)(n.h3,{id:"rich-display-configuration",children:"Rich Display Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Enable formatted markdown display to users:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"agents:\n  - id: presenter\n    model: anthropic/claude-3.5-sonnet\n    tools:\n      - tool_forge_display_show_user # Required for rich display\n      # Other tools...\n"})}),"\n",(0,i.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../custom-commands",children:"Custom Commands"})," - Create your own commands for specialized tasks"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../context-compaction",children:"Context Compaction"})," - Learn how to optimize context management"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../agent-configuration",children:"Agent Configuration"})," - Detailed reference for agent configuration options"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../tools-reference",children:"Tools Reference"})," - Complete documentation of available tools"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../error-handling",children:"Error Handling"})," - Configure automatic retries and error recovery"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var o=t(6540);const i={},s=o.createContext(i);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);